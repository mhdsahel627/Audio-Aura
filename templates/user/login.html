{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(90deg, #450623, #130325);
      margin: 0;
    }

    /* Dynamic Island Container */
    #dynamic-island {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 9999;
      pointer-events: none;
    }

    /* Toast Base */
    .island-toast {
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 260px;
      max-width: 380px;
      padding: 12px 18px;
      color: #fff;
      font-weight: 500;
      font-size: 15px;
      border-radius: 40px;
      background: #111;
      box-shadow: 0 4px 15px rgba(0,0,0,0.25);
      opacity: 0;
      transform: scale(0.7) translateY(-10px);
      animation: islandIn 0.4s cubic-bezier(0.22, 1, 0.36, 1) forwards;
      pointer-events: auto;
    }

    .island-toast.success { border: 2px solid #28a745; }
    .island-toast.error   { border: 2px solid #dc3545; }
    .island-toast.info    { border: 2px solid #0dcaf0; }
    .island-toast.warning { border: 2px solid #facc15; }

    .island-toast .icon { font-size: 18px; }

    @keyframes islandIn {
      0% { opacity: 0; transform: scale(0.7) translateY(-10px); }
      60% { opacity: 1; transform: scale(1.05) translateY(0); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }

    @keyframes islandOut {
      0% { opacity: 1; transform: scale(1) translateY(0); }
      100% { opacity: 0; transform: scale(0.6) translateY(-15px); }
    }

    /* Divider */
    .divider {
      text-align: center;
      margin: 20px 0;
      position: relative;
      font-size: 14px;
      color: #777;
    }
    .divider::before, .divider::after {
      content: "";
      position: absolute;
      top: 50%;
      width: 45%;
      height: 1px;
      background: #ddd;
    }
    .divider::before { left: 0; }
    .divider::after { right: 0; }

    /* Google Button */
    .google-btn {
      background: #fff;
      border: 1px solid #ddd;
      color: #444;
      font-weight: 500;
    }
    .google-btn:hover { background: #f1f1f1; }
    .form-control{background:transparent;border:none;border-bottom:1px solid #666;border-radius:0;color:#fff;font-size:14px;padding:10px;transition:all 0.3s ease;}
    input:-webkit-autofill {
      -webkit-box-shadow: 0 0 0px 1000px #130325 inset !important; /* matches your background */
      -webkit-text-fill-color: #fff !important;
    }
    .form-control:focus {
      background: transparent !important;
      box-shadow: none;
      color: #fff;
    }
    .form-control::placeholder {
      color: #eee !important; /* light white placeholder */
      opacity: 1;
    }


    
  </style>
</head>
<body>

<!-- Dynamic Island -->
<div id="dynamic-island">
  {% if messages %}
    {% for message in messages %}
      <div class="island-toast {{ message.tags|default:'info' }}">
        <span class="icon">
          {% if message.tags == 'success' %}‚úîÔ∏è{% elif message.tags == 'error' %}‚ùå{% elif message.tags == 'warning' %}‚ö†Ô∏è{% else %}‚ÑπÔ∏è{% endif %}
        </span>
        <span class="msg-text">{{ message }}</span>
      </div>
    {% endfor %}
  {% endif %}
</div>

<!-- Login Form -->
<div class="container p-0 my-5 rounded shadow-lg overflow-hidden">
  <div class="row g-0">
    <div class="col-md-6 d-none d-md-block">
      <img src="{% static 'images/kv.jpg' %}" alt="Audio Aura Banner" class="img-fluid h-100 w-100" style="object-fit: cover;">
    </div>
    <div class="col-md-6 p-5 d-flex flex-column justify-content-center">
      <div class="text-center mb-4">
        <img src="{% static 'images/logo.png' %}" alt="Audio Aura Logo" style="width: 120px;">
      </div>

      <div class="d-grid mb-3">
        <a href="{% url 'social:begin' 'google-oauth2' %}" class="btn google-btn w-100">
          <img src="https://img.icons8.com/color/20/000000/google-logo.png" class="me-2"/>
          Sign in with Google
        </a>
      </div>

      <div class="divider">OR</div>

    <form method="POST" novalidate>
      {% csrf_token %}

      <!-- Email -->
      <div class="mb-2">
        {{ form.email }}
        {% if form.email.errors %}
          <div class="text-danger small">
            {% for error in form.email.errors %} {{ error }} {% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- Password with eye toggle -->
      <div class="input-group mb-2">
        {{ form.password }}
        <button type="button" class="btn btn-outline-secondary" id="togglePassword">üëÅÔ∏è</button>
      </div>
      {% if form.password.errors %}
        <div class="text-danger small">
          {% for error in form.password.errors %} {{ error }} {% endfor %}
        </div>
      {% endif %}

      <!-- Non-field Errors (eg: Invalid login) -->
      {% if form.non_field_errors %}
        <div class="text-danger small mb-2">
          {% for error in form.non_field_errors %} {{ error }} {% endfor %}
        </div>
      {% endif %}

      <!-- Submit -->
      <div class="d-grid mt-3">
        <button type="submit" class="btn btn-outline-primary">Sign In</button>
      </div>

      <!-- Links -->
      <div class="d-flex justify-content-between mt-3">
        <a href="{% url 'signup' %}" class="text-primary text-decoration-none">Register Now</a>
        <a href="{% url 'forgot_password' %}" class="text-warning text-decoration-none">Forgot Password?</a>
      </div>
    </form>


      <p class="text-center text-light mt-4 mb-0" style="font-size: 12px;">AUDIO AURA Terms & Conditions</p>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // Password toggle
  const togglePassword = document.getElementById('togglePassword');
  const passwordInput = document.getElementById('passwordInput');
  togglePassword.addEventListener('click', function () {
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordInput.setAttribute('type', type);
    this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
  });

  // Dynamic Island 5s display
  document.addEventListener('DOMContentLoaded', function() {
    const toasts = document.querySelectorAll('.island-toast');
    toasts.forEach(t => {
      setTimeout(() => {
        t.style.animation = "islandOut 0.6s forwards";
        t.addEventListener('animationend', () => t.remove());
      }, 5000); // 5 sec stay
    });
  });
</script>
</body>
</html>
